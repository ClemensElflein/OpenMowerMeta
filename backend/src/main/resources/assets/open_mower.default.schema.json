{
  "properties": {
    "custom_environment": {
      "additionalProperties": {
        "type": "string"
      },
      "description": "Click the + button to add additional environment variables. Each row is a KEY=VALUE pair and will be injected into the container.",
      "title": "Additional Environment Variables",
      "type": "object"
    },
    "external_mqtt_broker": {
      "description": "You can configure Open Mower to publish status and sensor data to your MQTT broker.",
      "properties": {
        "OM_MQTT_ENABLE": {
          "description": "Enable publishing to the external MQTT broker.",
          "title": "Enable MQTT Publisher",
          "type": "boolean",
          "x-environment-variable": "OM_MQTT_ENABLE"
        },
        "OM_MQTT_HOSTNAME": {
          "description": "MQTT broker hostname or IP address.",
          "title": "MQTT Broker Hostname",
          "type": "string",
          "x-environment-variable": "OM_MQTT_HOSTNAME"
        },
        "OM_MQTT_PASSWORD": {
          "description": "MQTT broker password.",
          "title": "MQTT Broker Password",
          "type": "string",
          "x-environment-variable": "OM_MQTT_PASSWORD"
        },
        "OM_MQTT_PORT": {
          "description": "MQTT broker port.",
          "title": "MQTT Broker Port",
          "type": "number",
          "x-environment-variable": "OM_MQTT_PORT"
        },
        "OM_MQTT_TOPIC_PREFIX": {
          "description": "MQTT topic prefix.",
          "title": "MQTT Topic Prefix",
          "type": "string",
          "x-environment-variable": "OM_MQTT_TOPIC_PREFIX"
        },
        "OM_MQTT_USER": {
          "description": "MQTT broker user.",
          "title": "MQTT Broker Username",
          "type": "string",
          "x-environment-variable": "OM_MQTT_USER"
        }
      },
      "title": "External MQTT Broker",
      "type": "object"
    },
    "gps_settings": {
      "allOf": [
        {
          "if": {
            "properties": {
              "advanced": {
                "const": true
              }
            }
          },
          "then": {
            "properties": {
              "OM_GPS_BAUDRATE": {
                "description": "Baud rate for GPS board.",
                "type": "string",
                "x-environment-variable": "OM_GPS_BAUDRATE"
              },
              "OM_GPS_PORT": {
                "description": "Port for GPS board. Keep empty for default values.",
                "type": "string",
                "x-environment-variable": "OM_GPS_PORT"
              },
              "OM_GPS_PROTOCOL": {
                "default": "UBX",
                "description": "Protocol used by your GPS board. For u-blox devices use UBX, otherwise NMEA.",
                "enum": [
                  "UBX",
                  "NMEA"
                ],
                "title": "GPS Protocol",
                "type": "string",
                "x-environment-variable": "OM_GPS_PROTOCOL"
              },
              "OM_USE_F9R_SENSOR_FUSION": {
                "default": false,
                "description": "Use F9R's sensor fusion. Disable, if unsure.",
                "type": "boolean",
                "x-environment-variable": "OM_USE_F9R_SENSOR_FUSION"
              },
              "OM_USE_RELATIVE_POSITION": {
                "default": false,
                "description": "True, to use Relative Positioning. If you are unsure keep at false.",
                "title": "Use Relative Position",
                "type": "boolean",
                "x-environment-variable": "OM_USE_RELATIVE_POSITION"
              }
            }
          }
        }
      ],
      "properties": {
        "DATUM": {
          "description": "Set the coordinates for the robot's map origin. The only requirement is, that these are near your docking station (within a few meters).",
          "properties": {
            "OM_DATUM_LAT": {
              "description": "Coordinates near your docking station.",
              "title": "Datum Lat",
              "type": "string",
              "x-environment-variable": "OM_DATUM_LAT"
            },
            "OM_DATUM_LONG": {
              "description": "Coordinates near your docking station.",
              "title": "Datum Long",
              "type": "string",
              "x-environment-variable": "OM_DATUM_LONG"
            }
          },
          "title": "Origin / Datum",
          "type": "object"
        },
        "NTRIP": {
          "allOf": [
            {
              "if": {
                "properties": {
                  "OM_USE_NTRIP": {
                    "const": true
                  }
                }
              },
              "then": {
                "properties": {
                  "OM_NTRIP_ENDPOINT": {
                    "default": "BASE1",
                    "description": "NTRIP endpoint / mount point.",
                    "title": "NTRIP Endpoint",
                    "type": "string",
                    "x-environment-variable": "OM_NTRIP_ENDPOINT"
                  },
                  "OM_NTRIP_HOSTNAME": {
                    "default": "your-ntrip-caster",
                    "description": "Hostname or IP of your NTRIP caster.",
                    "title": "NTRIP Hostname",
                    "type": "string",
                    "x-environment-variable": "OM_NTRIP_HOSTNAME"
                  },
                  "OM_NTRIP_PASSWORD": {
                    "default": "gps",
                    "description": "NTRIP password.",
                    "title": "NTRIP Password",
                    "type": "string",
                    "x-environment-variable": "OM_NTRIP_PASSWORD"
                  },
                  "OM_NTRIP_PORT": {
                    "default": 2101,
                    "description": "Port of your NTRIP caster.",
                    "title": "NTRIP port",
                    "type": "number",
                    "x-environment-variable": "OM_NTRIP_PORT"
                  },
                  "OM_NTRIP_USER": {
                    "default": "gps",
                    "description": "NTRIP username.",
                    "title": "NTRIP Username",
                    "type": "string",
                    "x-environment-variable": "OM_NTRIP_USER"
                  }
                }
              }
            }
          ],
          "properties": {
            "OM_USE_NTRIP": {
              "default": true,
              "description": "Set to False if using an external radio.",
              "title": "Use Ntrip for receiving corrections",
              "type": "boolean",
              "x-environment-variable": "OM_USE_NTRIP"
            }
          },
          "title": "NTRIP Settings",
          "type": "object"
        },
        "advanced": {
          "description": "Show advanced GPS settings",
          "type": "boolean"
        }
      },
      "title": "GPS Settings",
      "type": "object"
    },
    "important_settings": {
      "properties": {
        "OM_HARDWARE_VERSION": {
          "default": "0_13_X",
          "description": "Your hardware/firmware version. This corresponds to the mainboard you are using in your build.",
          "enum": [
            "0_13_X",
            "0_12_X_LSM6DSO",
            "0_11_X_WT901",
            "0_10_X_WT901",
            "0_10_X_MPU9250",
            "0_9_X_WT901_INSTEAD_OF_SOUND",
            "0_9_X_MPU9250"
          ],
          "title": "Mainboard Version",
          "type": "string",
          "x-environment-variable": "OM_HARDWARE_VERSION"
        },
        "OM_MOWER": {
          "default": "YardForce500",
          "description": "The type of mower you're using. This sets physical properties like antenna position and wheel ticks per meter. Use CUSTOM for a custom mower buiold.",
          "enum": [
            "YardForce500",
            "YardForceSA650",
            "CUSTOM"
          ],
          "title": "Mower Model",
          "type": "string",
          "x-environment-variable": "OM_MOWER"
        },
        "OM_MOWER_ESC_TYPE": {
          "default": "xesc_mini",
          "description": "Select which ESC (speed controller) type you are using. Use xesc_mini if unsure.",
          "enum": [
            "xesc_mini",
            "xesc_2040"
          ],
          "title": "ESC Type",
          "type": "string",
          "x-environment-variable": "OM_MOWER_ESC_TYPE"
        },
        "OM_MOWER_GAMEPAD": {
          "default": "xbox360",
          "description": "Select your gamepad. The cheap ones are usually xbox360.",
          "enum": [
            "ps3",
            "steam_stick",
            "steam_touch",
            "xbox360"
          ],
          "title": "Gamepad",
          "type": "string",
          "x-environment-variable": "OM_MOWER_GAMEPAD"
        }
      },
      "title": "Hardware Settings",
      "type": "object"
    },
    "mower_logic_settings": {
      "allOf": [
        {
          "if": {
            "properties": {
              "advanced": {
                "const": true
              }
            }
          },
          "then": {
            "properties": {
              "OM_MOWING_ANGLE_INCREMENT": {
                "default": 0,
                "description": "The increment value will automatically add specified number of degrees to the mowing angle everytime the whole map is finished",
                "type": "number",
                "x-environment-variable": "OM_MOWING_ANGLE_INCREMENT"
              },
              "OM_MOWING_ANGLE_OFFSET": {
                "default": 0,
                "description": "Mowing angle offset -180 deg - +180 deg, 0 = east, -90 = north. If mowing angle offset is not absolute it gets added to the auto detected angle which is set by the first 2 m of recorded outline.",
                "type": "number",
                "x-environment-variable": "OM_MOWING_ANGLE_OFFSET"
              },
              "OM_MOWING_ANGLE_OFFSET_IS_ABSOLUTE": {
                "default": false,
                "description": "If mowing angle offset is absolute.",
                "type": "boolean",
                "x-environment-variable": "OM_MOWING_ANGLE_OFFSET_IS_ABSOLUTE"
              },
              "OM_OUTLINE_OVERLAP_COUNT": {
                "default": 0,
                "description": "Number of outlines to overlap.",
                "type": "number",
                "x-environment-variable": "OM_OUTLINE_OVERLAP_COUNT"
              },
              "OM_PERIMETER_SIGNAL": {
                "description": "Use perimeter sensor for docking. Set to 1 or 2 depending on the signal selected on the docking station. This is only supported by Mowgli builds for now.",
                "type": "number",
                "x-environment-variable": "OM_PERIMETER_SIGNAL"
              }
            }
          }
        }
      ],
      "properties": {
        "OM_AUTOMATIC_MODE": {
          "default": "MANUAL",
          "description": "Automatic start value.",
          "enum": [
            "MANUAL",
            "SEMIAUTO",
            "AUTO"
          ],
          "title": "Automatic Mode",
          "type": "string",
          "x-environment-variable": "OM_AUTOMATIC_MODE",
          "x-remap-values": {
            "AUTO": 2,
            "MANUAL": 0,
            "SEMIAUTO": 1
          }
        },
        "OM_BATTERY_CRITICAL_VOLTAGE": {
          "default": 23.0,
          "description": "Immediate dock if voltage is critical.",
          "title": "Battery Critical Voltage",
          "type": "number",
          "x-environment-variable": "OM_BATTERY_CRITICAL_VOLTAGE"
        },
        "OM_BATTERY_EMPTY_VOLTAGE": {
          "default": 24.0,
          "description": "Dock if voltage remains below empty for 20s.",
          "title": "Battery Empty Voltage",
          "type": "number",
          "x-environment-variable": "OM_BATTERY_EMPTY_VOLTAGE"
        },
        "OM_BATTERY_FULL_VOLTAGE": {
          "default": 28.5,
          "description": "Voltage for battery to be considered full.",
          "title": "Battery Full Voltage",
          "type": "number",
          "x-environment-variable": "OM_BATTERY_FULL_VOLTAGE"
        },
        "OM_DOCKING_DISTANCE": {
          "default": 1.0,
          "description": "Distance in [m] to drive forward after docking.",
          "title": "Docking Distance",
          "type": "number",
          "x-environment-variable": "OM_DOCKING_DISTANCE"
        },
        "OM_DOCKING_EXTRA_TIME": {
          "default": 0.0,
          "description": "Extra time in [s] to continue docking after voltage detection. This can be useful to make good contact with the base station. Use carefully.",
          "type": "number",
          "x-environment-variable": "OM_DOCKING_EXTRA_TIME"
        },
        "OM_ENABLE_MOWER": {
          "default": false,
          "description": "Enable mowing motor. Set to false for testing.",
          "title": "Enable Mowing Motor",
          "type": "boolean",
          "x-environment-variable": "OM_ENABLE_MOWER"
        },
        "OM_ENABLE_RECORDING_ALL": {
          "default": false,
          "description": "Set to true to record your session for debugging. Recordings will be stored in $HOME. Only enable for testing, otherwise your SD card will get full soon.",
          "title": "Enable Recording",
          "type": "boolean",
          "x-environment-variable": "OM_ENABLE_RECORDING_ALL"
        },
        "OM_GPS_TIMEOUT_SEC": {
          "default": 5.0,
          "description": "Timeout for GPS in [s]. Mowing will pause, if no GPS update was received within this configured time.",
          "title": "GPS Timeout",
          "type": "number",
          "x-environment-variable": "OM_GPS_TIMEOUT_SEC"
        },
        "OM_GPS_WAIT_TIME_SEC": {
          "default": 10.0,
          "description": "Additional wait time in [s] after undocking. Increase this value, if you get inconsistent fixes after undocking.",
          "title": "GPS Wait Time",
          "type": "number",
          "x-environment-variable": "OM_GPS_WAIT_TIME_SEC"
        },
        "OM_MOWING_MOTOR_TEMP_HIGH": {
          "default": 80.0,
          "description": "Motor temperature to stop mowing and wait for cooldown. This value is in deg. C.",
          "title": "Mower max. Temperature",
          "type": "number",
          "x-environment-variable": "OM_MOWING_MOTOR_TEMP_HIGH"
        },
        "OM_MOWING_MOTOR_TEMP_LOW": {
          "default": 40.0,
          "description": "After reaching the max temperature, mowing will be paused until the mower temperature is above this value. This value is in deg. C.",
          "title": "Mower low Temperature",
          "type": "number",
          "x-environment-variable": "OM_MOWING_MOTOR_TEMP_LOW"
        },
        "OM_OUTLINE_COUNT": {
          "default": 4,
          "description": "How many outlines should the mover drive. It's not recommended to set this below 4.",
          "type": "number",
          "x-environment-variable": "OM_OUTLINE_COUNT"
        },
        "OM_OUTLINE_OFFSET": {
          "default": 0.05,
          "description": "Offset to be applied to the recorded outline. Positive values move the outline inwards (i.e. safety margin).",
          "title": "Mowing Outline Offset",
          "type": "number",
          "x-environment-variable": "OM_OUTLINE_OFFSET"
        },
        "OM_TOOL_WIDTH": {
          "default": 0.13,
          "description": "Width of mowing paths in [m]. Use smaller values for more overlap.",
          "title": "Mowing Tool Width",
          "type": "number",
          "x-environment-variable": "OM_TOOL_WIDTH"
        },
        "OM_UNDOCK_DISTANCE": {
          "default": 2.0,
          "description": "Distance in [m] to drive for undocking.",
          "title": "Undock Distance",
          "type": "number",
          "x-environment-variable": "OM_UNDOCK_DISTANCE"
        },
        "advanced": {
          "description": "Show advanced Mower Logic settings",
          "type": "boolean"
        }
      },
      "title": "Mower Logic Settings",
      "type": "object"
    },
    "sound_settings": {
      "description": "For Full Sound Support read the instructions carefully. You will probably need to make hardware modifications before enabling these options.",
      "properties": {
        "OM_DFP_IS_5V": {
          "default": false,
          "description": "Enable if DFPlayer is set to 5V. Important: ONLY enable this, if you are sure that you have done the required modification. Otherwise you might break your Raspberry Pi Pico.",
          "title": "DFPlayer is set to 5V",
          "type": "boolean",
          "x-environment-variable": "OM_DFP_IS_5V"
        },
        "OM_LANGUAGE": {
          "default": "en",
          "description": "Language as ISO-639-1 code string. This is use for sound output.",
          "enum": [
            "en",
            "de"
          ],
          "type": "string",
          "x-environment-variable": "OM_LANGUAGE"
        },
        "OM_VOLUME": {
          "default": -1,
          "description": "Sound volume (0-100 or -1). -1 means the volume is managed by the CoverUI.",
          "type": "number",
          "x-environment-variable": "OM_VOLUME"
        }
      },
      "title": "Sound Settings",
      "type": "object"
    }
  },
  "type": "object"
}
